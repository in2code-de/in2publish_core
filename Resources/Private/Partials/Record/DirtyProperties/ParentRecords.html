<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:publish="http://typo3.org/ns/In2code/In2publishCore/ViewHelpers"
	  xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
	  data-namespace-typo3-fluid="true"
>
	<f:comment>
		Show parent record (e.g. page) properties only if they have changed
	</f:comment>
	<f:if condition="{record.state} == 'changed' || {record.state} == 'deleted'">
		<f:if condition="{record.changedProps}">
			<table class="table table-striped">
				<thead>
					<tr>
						<th><f:translate key="dirty_properties_pageproperties" arguments="{0:'{publish:Tca.GetTableLabelFromLocallang(tableName:record.classification)}'}">Properties</f:translate></th>
					</tr>
				</thead>
				<tbody>
					<f:for each="{record.changedProps}" as="fieldName">
						<tr>
							<td>
								<publish:Tca.GetFieldLabelFromLocallang fieldName="{fieldName}" tableName="{record.classification}"/>
								<publish:Tca.FormatPropertyByTcaDefinition fieldName="{fieldName}" tableName="{record.classification}">
									<publish:Miscellaneous.GetPropertyFromStagingDefinition record="{record}" propertyName="{fieldName}" stagingLevel="{stagingLevel}"/>
								</publish:Tca.FormatPropertyByTcaDefinition>
							</td>
						</tr>
					</f:for>
				</tbody>
			</table>
		</f:if>
	</f:if>
</html>
